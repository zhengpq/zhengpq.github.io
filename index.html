<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="zhengpq">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="zhengpq">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="zhengpq">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>zhengpq</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">zhengpq</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/24/designParten/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhengpq">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhengpq">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/04/24/designParten/" itemprop="url">????</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-24T17:12:07+08:00">
                2018-04-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/" itemprop="url" rel="index">
                    <span itemprop="name">????</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1"><a href="#1" class="headerlink" title="1 ??"></a>1 ??</h2><p>???????????????????????????????????????</p>
<h2 id="2"><a href="#2" class="headerlink" title="2 ??????????"></a>2 ??????????</h2><h3 id="2-1"><a href="#2-1" class="headerlink" title="2.1 ????????"></a>2.1 ????????</h3><p>???????????????????????????????????????????????????????????????</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">function award(level, salary) &#123;</div><div class="line">    if (level === &apos;S&apos;) &#123;</div><div class="line">        return salary * 4;</div><div class="line">    &#125;</div><div class="line">    if (level === &apos;A&apos;) &#123;</div><div class="line">        return salary * 3;</div><div class="line">    &#125;</div><div class="line">    if (level === &apos;B&apos;) &#123;</div><div class="line">        return salary * 2;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>?????????????????????</p>
<ul>
<li>????????????????if??????????????????????????</li>
<li>?????????????????????????</li>
<li>???????????????????????????????????????????????????????????</li>
</ul>
<h3 id="2-2"><a href="#2-2" class="headerlink" title="2.2 ????????"></a>2.2 ????????</h3><p> ????????????????????????</p>
<ul>
<li>????????????????????????????????????????????????????</li>
<li>??????????????????????????????????????????????????????</li>
</ul>
<p>???????</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">//?????</div><div class="line">function strategy(number) &#123;</div><div class="line">    return function (salary) &#123;</div><div class="line">        return number * salary;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//?????????????</div><div class="line">const strategies = &#123;</div><div class="line">    S: strategy(4),</div><div class="line">    A: strategy(3),</div><div class="line">    B: strategy(2),</div><div class="line">&#125;;</div><div class="line"></div><div class="line">const calculate = function (level, salary) &#123;</div><div class="line">    return strategies[level](salary);</div><div class="line">&#125;;</div><div class="line">console.log(calculate(&apos;S&apos;, 1000));</div><div class="line">console.log(calculate(&apos;A&apos;, 1000));</div></pre></td></tr></table></figure>
<h2 id="3"><a href="#3" class="headerlink" title="3 ????"></a>3 ????</h2><p>???????????????????????<br>????????????????</p>
<ul>
<li>????????????????????????</li>
<li>?????????????????????????????</li>
</ul>
<p>????????????<code>strategies</code>??????????????????<code>calculate</code>???????????????????</p>
<h3 id="3-1"><a href="#3-1" class="headerlink" title="3.1 ???????????????"></a>3.1 ???????????????</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">// ???</div><div class="line">class Performance &#123;</div><div class="line">    constructor() &#123;&#125;</div><div class="line">    // ??S????</div><div class="line">    performanceS(salary) &#123;</div><div class="line">        return salary * 4;</div><div class="line">    &#125;</div><div class="line">    // ??A????</div><div class="line">    performanceA(salary) &#123;</div><div class="line">        return salary * 3;</div><div class="line">    &#125;</div><div class="line">    // ??B????</div><div class="line">    performanceB(salary) &#123;</div><div class="line">        return salary * 2;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">// ???</div><div class="line">class Bonus &#123;</div><div class="line">    constructor() &#123;</div><div class="line">        this.salary = null; // ????</div><div class="line">        this.strategy = null; // ???????????</div><div class="line">    &#125;</div><div class="line">    // ?????????</div><div class="line">    setSalary(salary) &#123;</div><div class="line">        this.salary = salary;</div><div class="line">    &#125;</div><div class="line">    // ?????????????</div><div class="line">    setStrategy(strategy) &#123;</div><div class="line">        this.strategy = strategy;</div><div class="line">    &#125;</div><div class="line">    // ????</div><div class="line">    getBonus() &#123;</div><div class="line">        console.log(this.strategy(this.salary));</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">// ??????????</div><div class="line">const performance = new Performance();</div><div class="line">// ???????</div><div class="line">const bonus = new Bonus();</div><div class="line">// ????</div><div class="line">bonus.setSalary(1000);</div><div class="line">bonus.setStrategy(performance.performanceS);</div><div class="line">bonus.getBonus();</div></pre></td></tr></table></figure>
<p>????????????????????????????????????????????????????????????????????????????????????????????JavaScript????????????????????????????</p>
<h2 id="4"><a href="#4" class="headerlink" title="4 ??????????"></a>4 ??????????</h2><p>??????????????????????????????????????????????????????????????????????????????????????????????????????????</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">function award(salary) &#123;</div><div class="line">    if (10000 &lt; salary &lt; 20000) &#123;</div><div class="line">        return salary * 0.2;</div><div class="line">    &#125;</div><div class="line">    if (20000 &lt; salary &lt; 30000) &#123;</div><div class="line">        return salary * 0.3;</div><div class="line">    &#125;</div><div class="line">    if (30000 &lt; salary &lt; 40000) &#123;</div><div class="line">        return salary * 0.4;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>?????????????????????????????????</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">const sections = &#123;</div><div class="line">    section1: [10000, 20000, 0.2],</div><div class="line">    section2: [20000, 30000, 0.3],</div><div class="line">    section3: [30000, 40000, 0.4],</div><div class="line">&#125;;</div><div class="line"></div><div class="line">function strategy(condition) &#123;</div><div class="line">    return function (salary) &#123;</div><div class="line">        for (const key in condition) &#123;</div><div class="line">            if (condition[key][0] &lt; salary &amp;&amp; condition[key][1] &gt; salary) &#123;</div><div class="line">                console.log(salary * condition[key][2]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">const calculate = function (salary) &#123;</div><div class="line">    strategy(sections)(salary);</div><div class="line">&#125;;</div><div class="line">calculate(15000);</div></pre></td></tr></table></figure>
<p>?????????????????????????????????????????????section??????????????????????????</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/18/Sort/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhengpq">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhengpq">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/18/Sort/" itemprop="url">Sort</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-18T11:46:39+08:00">
                2018-03-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据结构与算法/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构与算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="常见的排序算法"><a href="#常见的排序算法" class="headerlink" title="常见的排序算法"></a>常见的排序算法</h2><h3 id="创建一个测试数组"><a href="#创建一个测试数组" class="headerlink" title="创建一个测试数组"></a>创建一个测试数组</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">function TextArray(numElement) &#123;</div><div class="line">    this.dataStore = [];</div><div class="line">    this.pos = 0;</div><div class="line">    this.numElements = numElement;</div><div class="line">    this.gaps= null;</div><div class="line">    for (var i = 0; i &lt; this.numElements; i++) &#123;</div><div class="line">        this.dataStore[i] = i;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//设置数据</div><div class="line"></div><div class="line">TextArray.prototype.setData = function () &#123;</div><div class="line">    for (var i = 0; i &lt; this.numElements; i++) &#123;</div><div class="line">        this.dataStore[i] = Math.floor(Math.random()*(this.numElements+1));</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//清空数据</div><div class="line"></div><div class="line">TextArray.prototype.clear = function () &#123;</div><div class="line">    for (var i = 0; i &lt; this.dataStore.length; i++) &#123;</div><div class="line">        this.dataStore[i] = 0;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//插入数据</div><div class="line"></div><div class="line">TextArray.prototype.insert = function (element) &#123;</div><div class="line">    this.dataStore[this.pos++] = element;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//数据以字符串的形式展示</div><div class="line"></div><div class="line">TextArray.prototype.toString = function () &#123;</div><div class="line">    var restr = &apos;&apos;;</div><div class="line">    for (var i = 0; i &lt; this.dataStore.length; i++) &#123;</div><div class="line">        restr += this.dataStore[i].toString()+&apos; &apos;;</div><div class="line">    &#125;</div><div class="line">    return restr;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var textArray = new TextArray(10);</div><div class="line">textArray.setData();</div><div class="line">console.log(textArray.toString());</div></pre></td></tr></table></figure>
<h3 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">TextArray.prototype.bubbleSort = function () &#123;</div><div class="line">    var temp;</div><div class="line">    for (var i = 0; i &lt; this.dataStore.length; i++) &#123;</div><div class="line">        for (var j = 0; j &lt;this.dataStore.length-1 ; j++) &#123;</div><div class="line">            if (this.dataStore[j]&gt;this.dataStore[j+1]) &#123;</div><div class="line">                temp = this.dataStore[j];</div><div class="line">                this.dataStore[j] = this.dataStore[j+1];</div><div class="line">                this.dataStore[j+1] = temp;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">TextArray.prototype.selectSort = function () &#123;</div><div class="line">    var temp,current;</div><div class="line">    for (var i = 0; i &lt; this.dataStore.length-1; i++) &#123;</div><div class="line">        for (var j = i+1; j &lt;this.dataStore.length ; j++) &#123;</div><div class="line">            if (this.dataStore[i]&gt;this.dataStore[j]) &#123;</div><div class="line">                temp = this.dataStore[i];</div><div class="line">                this.dataStore[i] = this.dataStore[j];</div><div class="line">                this.dataStore[j] = temp;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">TextArray.prototype.insertSort = function () &#123;</div><div class="line">    var tepm,inner;</div><div class="line">    for (var i = 1; i &lt; this.dataStore.length; i++) &#123;</div><div class="line">        tepm = this.dataStore[i];</div><div class="line">        inner = i;</div><div class="line">        while (inner&gt;0&amp;&amp;(this.dataStore[inner-1]&gt;=tepm))&#123;</div><div class="line">            this.dataStore[inner] = this.dataStore[inner-1];</div><div class="line">            --inner;</div><div class="line">        &#125;</div><div class="line">        this.dataStore[inner] = tepm;</div><div class="line">    &#125;</div><div class="line"> &#125;;</div></pre></td></tr></table></figure>
<h3 id="希尔排序"><a href="#希尔排序" class="headerlink" title="希尔排序"></a>希尔排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">TextArray.prototype.shellSort = function (arr) &#123;</div><div class="line">    this.gaps =arr;</div><div class="line">    for (var g = 0; g &lt; this.gaps.length; g++) &#123;</div><div class="line">        for (var i = 0; i &lt; this.dataStore.length; i++) &#123;</div><div class="line">            var temp = this.dataStore[i];</div><div class="line">            for (var j = i; j&gt;=this.gaps[g]&amp;&amp;this.dataStore[j-this.gaps[g]]&gt;temp; j-=this.gaps[g]) &#123;</div><div class="line">                this.dataStore[j]=this.dataStore[j-this.gaps[g]];</div><div class="line">            &#125;</div><div class="line">            this.dataStore[j] = temp;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">TextArray.prototype.quickSort = function (list) &#123;</div><div class="line">    if (list.length ==0) &#123;</div><div class="line">        return;</div><div class="line">    &#125;else &#123;</div><div class="line">        let lessList=[];</div><div class="line">        let greaterList=[];</div><div class="line">        let pivot=list[0];</div><div class="line">        for (let i = 1; i &lt; list.length; i++) &#123;</div><div class="line">            if (list[i]&gt;pivot) &#123;</div><div class="line">                lessList.push(list[i]);</div><div class="line">            &#125;else &#123;</div><div class="line">                greaterList.push(list[i]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return TextArray.quickSort(lessList).concat(pivot,TextArray.quickSort(greaterList));</div><div class="line">&#125;;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/17/linkList/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhengpq">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhengpq">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/17/linkList/" itemprop="url">linkList</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-17T16:54:37+08:00">
                2018-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据结构与算法/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构与算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="单向链表"><a href="#单向链表" class="headerlink" title="单向链表"></a>单向链表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">//创建节点</div><div class="line">function Node(element) &#123;</div><div class="line">    this.element = element;</div><div class="line">    this.next=null;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//单向链表</div><div class="line">function LinkList() &#123;</div><div class="line">    this.head = new Node(&apos;head&apos;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">//遍历链表，查找目标节点</div><div class="line">LinkList.prototype.find =function (element) &#123;</div><div class="line">    var currentElement = this.head;</div><div class="line">    while (currentElement.element!=element)&#123;</div><div class="line">        currentElement=currentElement.next;</div><div class="line">    &#125;</div><div class="line">    return currentElement;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//插入新的元素</div><div class="line">LinkList.prototype.insert =function (target,element) &#123;</div><div class="line">    var newNode = new Node(element);</div><div class="line">    var currentElement = this.find(target);</div><div class="line">    newNode.next=currentElement.next;</div><div class="line">    currentElement.next=newNode;</div><div class="line"></div><div class="line">&#125;;</div><div class="line"></div><div class="line">//查找目标节点的前面一个节点</div><div class="line">LinkList.prototype.findPre=function (element) &#123;</div><div class="line">    var currentElement = this.head;</div><div class="line">    while (currentElemend.nextt!=element&amp;&amp;currentElement.next!=null)&#123;</div><div class="line">        currentElement=currentElement.next;</div><div class="line">    &#125;</div><div class="line">    return currentElement;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//移除一个节点</div><div class="line">LinkList.prototype.remove=function (element) &#123;</div><div class="line">    var ElementPre = this.findPre(element);</div><div class="line">    if (ElementPre!=null) &#123;</div><div class="line">        ElementPre.next= ElementPre.next.next;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//将链表展示出来</div><div class="line">LinkList.prototype.display = function () &#123;</div><div class="line">    var currentElement = this.head;</div><div class="line">    while (currentElement!=null)&#123;</div><div class="line">        console.log(currentElement);</div><div class="line">        currentElement=currentElement.next;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="双向链表"><a href="#双向链表" class="headerlink" title="双向链表"></a>双向链表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">//创建新的节点</div><div class="line">function Node(element) &#123;</div><div class="line">    this.element=element;</div><div class="line">    this.pre=null;</div><div class="line">    this.next=null;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//双向链表</div><div class="line">function DouLinkList() &#123;</div><div class="line">    this.head=new Node(&apos;head&apos;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">//查找某个节点</div><div class="line">DouLinkList.prototype.find=function (element) &#123;</div><div class="line">    var currentElement = this.head;</div><div class="line">    while (currentElement.element!==element)&#123;</div><div class="line">        currentElement=currentElement.next;</div><div class="line">    &#125;</div><div class="line">    return currentElement;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//插入一个新的节点</div><div class="line">DouLinkList.prototype.insert=function (targt,element) &#123;</div><div class="line">    var newElement=new Node(element);</div><div class="line">    var targetElement=this.find(target);</div><div class="line">    targetElement.next.pre=newElement;</div><div class="line">    newElement.next=targetElement.next;</div><div class="line">    newElement.pre=targetElement;</div><div class="line">    targetElement.next=newElement;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//移除一个节点</div><div class="line">DouLinkList.prototype.remove=function (element) &#123;</div><div class="line">    var target = this.find(element);</div><div class="line">    if (target.pre===null) &#123;</div><div class="line">        target.next.pre=target.pre;</div><div class="line">        target.next=null;</div><div class="line">    &#125;else if(target.next===null)&#123;</div><div class="line">        target.pre.next=target.next;</div><div class="line">        target.pre=null;</div><div class="line">    &#125;else &#123;</div><div class="line">        target.pre.next=target.next;</div><div class="line">        target.next.pre=target.pre;</div><div class="line">        target.next=null;</div><div class="line">        target.pre=null;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//找出链表的结尾元素</div><div class="line">DouLinkList.prototype.findLast=function () &#123;</div><div class="line">    var currentElement=this.head;</div><div class="line">    while (currentElement.next!==null)&#123;</div><div class="line">        currentElement=currentElement.next;</div><div class="line">    &#125;</div><div class="line">    return currentElement;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="循环链表"><a href="#循环链表" class="headerlink" title="循环链表"></a>循环链表</h2><p>循环链表与其他两个的不同在于循环链表在创建头结点的时候将其next指向自身，形成一个循环</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">function CycleList() &#123;</div><div class="line">    this.head=new Node(&apos;head&apos;);</div><div class="line">    this.head.next=this.head;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/17/List/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhengpq">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhengpq">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/17/List/" itemprop="url">列表</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-17T15:14:25+08:00">
                2018-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据结构与算法/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构与算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><h2 id="列表的抽象数据结构"><a href="#列表的抽象数据结构" class="headerlink" title="列表的抽象数据结构"></a>列表的抽象数据结构</h2><table>
<thead>
<tr>
<th>方法和属性</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>listSize</td>
<td>列表元素的个数</td>
</tr>
<tr>
<td>pos</td>
<td>列表的当前位置</td>
</tr>
<tr>
<td>clear</td>
<td>清空列表</td>
</tr>
<tr>
<td>find</td>
<td>寻找指定的元素</td>
</tr>
<tr>
<td>toString</td>
<td>将列表变成字符串展示出来</td>
</tr>
<tr>
<td>getElement</td>
<td>返回当前位置的元素</td>
</tr>
<tr>
<td>insert</td>
<td>在现有元素后插入一个新的元素</td>
</tr>
<tr>
<td>append</td>
<td>在列表末尾插入新的元素</td>
</tr>
<tr>
<td>remove</td>
<td>移除列表末尾的元素</td>
</tr>
<tr>
<td>front</td>
<td>将列表的当前位置移动到第一个元素</td>
</tr>
<tr>
<td>end</td>
<td>将列表的当前位置移动到列表的最后一个</td>
</tr>
<tr>
<td>prev</td>
<td>将当前位置前移一位</td>
</tr>
<tr>
<td>next</td>
<td>将当前位置后移一位</td>
</tr>
<tr>
<td>hasNext</td>
<td>判断后一位</td>
</tr>
<tr>
<td>hasPrev</td>
<td>判断前一位</td>
</tr>
<tr>
<td>currPos</td>
<td>返回列表当前的位置</td>
</tr>
<tr>
<td>moveTo</td>
<td>将列表的当前位置移动到指定的位置</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line">function List() &#123;</div><div class="line">    this.listSize 0;</div><div class="line">    this.pos = 0;</div><div class="line">    this.dataStore = [];</div><div class="line">&#125;</div><div class="line"></div><div class="line">//清空列表</div><div class="line">List.prototype.clear = function () &#123;</div><div class="line">    delete this.dataStore;</div><div class="line">    this.dataStore=[];</div><div class="line">    this.listSize = this.pos=0;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//在列表末尾添加一个新的元素</div><div class="line">List.prototype.append = function (element) &#123;</div><div class="line">    this.dataStore.push(element);</div><div class="line">    ++this.listSize;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//寻找指定的元素</div><div class="line">List.prototype.find = function (element) &#123;</div><div class="line">    var position=this.dataStore.indexOf(element);</div><div class="line">    return (position!=-1)?position:false;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//将列表变成字符串展示出来</div><div class="line">List.prototype.toString = function () &#123;</div><div class="line">    return Array.prototype.join.call(this.dataStore,&apos;/n&apos;);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//返回当前位置的元素</div><div class="line">List.prototype.getElement = function () &#123;</div><div class="line">    return this.dataStore[this.pos];</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//在现有元素后插入一个新的元素</div><div class="line">List.prototype.insert = function (element) &#123;</div><div class="line">    this.dataStore.splice(this.pos+1,0,element);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//从列表中移除元素</div><div class="line">List.prototype.remove = function (element) &#123;</div><div class="line">    var position = this.find(element);</div><div class="line">    this.dataStore.splice(position,1);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//将列表的当前位置移动到第一个元素</div><div class="line">List.prototype.front = function () &#123;</div><div class="line">    this.pos=0;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//将列表的当前位置移动到第一个元素</div><div class="line">List.prototype.end = function () &#123;</div><div class="line">    this.pos=this.dataStore.length-1;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//将当前位置前移一位</div><div class="line">List.prototype.prev=function () &#123;</div><div class="line">   --this.pos;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//将当前位置后移一位</div><div class="line">List.prototype.next=function () &#123;</div><div class="line">    if (this.pos&lt;this.dataStore.length) &#123;</div><div class="line">        ++this.pos;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//将当前位置移动到指定位置</div><div class="line">List.prototype.moveTo=function (position) &#123;</div><div class="line">    if (position&lt;this.dataStore.length) &#123;</div><div class="line">        this.pos=position;</div><div class="line">    &#125;else &#123;</div><div class="line">        return &apos;the position is over the datastore\&apos;s length&apos;;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/15/evenLoop/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhengpq">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhengpq">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/15/evenLoop/" itemprop="url">浏览器端的EventLoop和node的EventLoop的区别</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-15T15:09:31+08:00">
                2018-03-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/node/" itemprop="url" rel="index">
                    <span itemprop="name">node</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近在学习node，看了一些关于node的eventLoop的文章之后得出自己的一些结论，跟大家分享一下，如果有错误的地方，也希望大家指出，多多指教！</p>
<p>说到JavaScript的异步，绕不开的就是EventLoop，这是JavaScript实现异步的基础，而浏览器端的EventLoop和node的又有很大的不同，下面，就让我们来探讨一下他们之间的区别。</p>
<h2 id="1浏览器EventLoop"><a href="#1浏览器EventLoop" class="headerlink" title="1浏览器EventLoop"></a><strong>1浏览器EventLoop</strong></h2><h3 id="1-1浏览器端异步"><a href="#1-1浏览器端异步" class="headerlink" title="1.1浏览器端异步"></a><strong>1.1浏览器端异步</strong></h3><p>浏览器端的异步主要包含下面几个方面：</p>
<ul>
<li>setTimeout</li>
<li>setInterval</li>
<li>事件</li>
<li>Ajax</li>
</ul>
<h3 id="1-2浏览器端的EventLoop的基本模型"><a href="#1-2浏览器端的EventLoop的基本模型" class="headerlink" title="1.2浏览器端的EventLoop的基本模型"></a><strong>1.2浏览器端的EventLoop的基本模型</strong></h3><p><img src="http://static.zybuluo.com/Dreamingboy/1p0wef8z0nokuri01mqrz1nm/image.png" alt="image.png-65.6kB"></p>
<p>上面的很好的解释了浏览器端的异步是如何实现的，下面先看一个代码片段来理解一下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">(function() &#123;</div><div class="line"></div><div class="line">  console.log(&apos;this is the start&apos;);</div><div class="line"></div><div class="line">  setTimeout(function cb() &#123;</div><div class="line">    console.log(&apos;this is a msg from call back&apos;);</div><div class="line">  &#125;);</div><div class="line"></div><div class="line">  console.log(&apos;this is just a message&apos;);</div><div class="line"></div><div class="line">  setTimeout(function cb1() &#123;</div><div class="line">    console.log(&apos;this is a msg from call back1&apos;);</div><div class="line">  &#125;, 0);</div><div class="line"></div><div class="line">  console.log(&apos;this is the end&apos;);</div><div class="line"></div><div class="line">&#125;)();</div><div class="line"></div><div class="line">//输出结果</div><div class="line">// &quot;this is the start&quot;</div><div class="line">// &quot;this is just a message&quot;</div><div class="line">// &quot;this is the end&quot;</div><div class="line">// &quot;this is a msg from call back&quot;</div><div class="line">// &quot;this is a msg from call back1&quot;</div></pre></td></tr></table></figure></p>
<p>我们都知道JavaScript是<strong>单线程</strong>的，但是这个单线程的意思是执行代码是单线程的，这个单线程就是上图的<strong>stack</strong>，所有的同步代码都是在这里执行的。而异步操纵只会在同步操作执行完之后才会开始执行。上面这段代码的执行经历下面这些过程：</p>
<ol>
<li>代码从上往下执行，先打印出“this is a msg from call back ”，</li>
<li>解析到第一个<strong>setTimeout</strong>，而且这个setTimeout没有给出具体的时间参数，那么此时就会默认时间参数是<strong>0</strong>（需要注意的是0不代表立即将setTimeout的回调函数加入到事件队列中，而是由一定的最小时间限制的），在经过最小时间限制后，就会将setTimeout的回调函数加入到事件队列中。</li>
<li>另外一个同步操作，打印出“this is just a message”</li>
<li>接下来是另外一个setTimeout的回调函数被加入到事件队列中，最后的同步操作打印出“this is the end”。</li>
<li>stack按照加入callbackQueue的回调函数的顺序从callbackQueue中拿出回调函数执行，首先是打印”this is a msg from call back”，然后是打印”this is a msg from call back1”</li>
</ol>
<p>这就是浏览器端的EventLoop的整个执行过程，这个过程相对来说还是比较简单易懂的。</p>
<h2 id="2-node的EventLoop"><a href="#2-node的EventLoop" class="headerlink" title="2 node的EventLoop"></a><strong>2 node的EventLoop</strong></h2><h3 id="2-1-基本模型"><a href="#2-1-基本模型" class="headerlink" title="2.1 基本模型"></a><strong>2.1 基本模型</strong></h3><p><img src="http://static.zybuluo.com/Dreamingboy/gtuf7a1w62hphl0gy5hiwdxf/image.png" alt="image.png-75.8kB"></p>
<p> 我们可以看到，node的EventLoop的模型要比浏览器端的复杂很多，下面让我们来一步步进行讲解。</p>
<h4 id="2-1-1-phase"><a href="#2-1-1-phase" class="headerlink" title="2.1.1 phase"></a><strong>2.1.1 phase</strong></h4><p> 上图中的每一个矩形代表的是事件队列的每一个阶段（官网上叫做“phase”），他们具体负责的工作为（附上官方文档的解释）：</p>
<ul>
<li><p>Timers：执行setTimeout()和setInterval()绑定的回调函数</p>
<blockquote>
<p>this phase executes callbacks scheduled by setTimeout() and setInterval().</p>
</blockquote>
</li>
<li><p>I/O callback：执行除了close callbacks、timers以及setImmediate()绑定的回调函数</p>
<blockquote>
<p>executes almost all callbacks with the exception of close callbacks, the ones scheduled by timers, and setImmediate().</p>
</blockquote>
</li>
<li>idle,prepare：只在内部使用</li>
<li><p>poll：检索新的I/O 事件，并且这个node在适当的时机在这个地方阻塞（具体应用场景我还想不出来，如果有哪位知道请指教一下）</p>
<blockquote>
<p>retrieve new I/O events; node will block here when appropriate.</p>
</blockquote>
</li>
<li><p>check：执行setImmediate()绑定的回调函数</p>
<blockquote>
<p>setImmediate() callbacks are invoked here.</p>
</blockquote>
</li>
<li><p>close callbacks：执行关闭事件绑定的回调函数<br>（注意：上面的执行是指将回调函数推到<strong>主线程</strong>执行）</p>
</li>
</ul>
<p>每个phase代表不同的时期，eventLoop每次轮询都会从timers开始将EventLoop里面的回调函数推导主线程中执行，直到执行完这个phase里面的回调函数或者是执行的数量达到允许的最大值（在每个循环周期中允许执行的函数数目是有限的）后才会进入到下一个phase，按照这样的顺序直到这个周期结束后再进入下个周期。当然，这里面还有很多细节，待会会详细讨论。</p>
<p>这里就可以看出node的EventLoop和浏览器端的EventLoop的很大的不同：<strong>浏览器端没有阶段的区分，只会按照回调函数进入事件队列的顺序进行执行，node则会按照不同类型的回调函数在不同阶段有区别地执行</strong>。</p>
<h4 id="2-1-2-timers"><a href="#2-1-2-timers" class="headerlink" title="2.1.2 timers"></a><strong>2.1.2 timers</strong></h4><p>setTimeout()和setInterval实际上和浏览器端的作用原理是一样的，在指定的时间后将绑定的回调函数添加到事件队列中，<strong>而且，当事件设置为0时，也不是立即就将回调函数添加到事件队列的timers中</strong>，下面这段是引用官网的说明：</p>
<blockquote>
<p>When delay is larger than 2147483647 or less than 1, the delay will be set to 1.</p>
</blockquote>
<p>下面看看官网的这个例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">const fs = require(&apos;fs&apos;);</div><div class="line"></div><div class="line">function someAsyncOperation(callback) &#123;</div><div class="line">  // Assume this takes 95ms to complete</div><div class="line">  fs.readFile(&apos;/path/to/file&apos;, callback);</div><div class="line">&#125;</div><div class="line"></div><div class="line">const timeoutScheduled = Date.now();</div><div class="line"></div><div class="line">setTimeout(() =&gt; &#123;</div><div class="line">  const delay = Date.now() - timeoutScheduled;</div><div class="line"></div><div class="line">  console.log(`$&#123;delay&#125;ms have passed since I was scheduled`);</div><div class="line">&#125;, 100);</div><div class="line"></div><div class="line"></div><div class="line">// do someAsyncOperation which takes 95 ms to complete</div><div class="line">someAsyncOperation(() =&gt; &#123;</div><div class="line">  const startCallback = Date.now();</div><div class="line"></div><div class="line">  // do something that will take 10ms...</div><div class="line">  while (Date.now() - startCallback &lt; 10) &#123;</div><div class="line">    // do nothing</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>让我们来分析一下上面这段代码的是如何执行的：</p>
<ol>
<li>代码从上向下解析，遇到第一个异步操作-setTimeout，于是将在100ms后将setTimeout绑定的函数添加到timers中</li>
<li>继续向下解析，执行函数<code>someAsyncOperation</code>，函数<code>someAsyncOperation</code>首先读取文件，这个过程花费了95ms</li>
<li>由于在执行执行同步代码的时候没有回调函数添加到事件队列中，所以在进入<strong>poll</strong>阶段时事件队列还是空的，此时poll会等待到有新的事件被触发。</li>
<li>在文件读取结束后将其绑定的回调函数添加到事件队列中，poll将回调函数推到主线程里面执行，由于这个函数要执行10ms，在执行到5ms时<code>setTimeout</code>绑定的回调函数会被添加到timers中去</li>
<li>等到<code>fs.read()</code>绑定的函数执行完毕后poll检测到timers中有绑定的函数，而且check和close callback如果有绑定函数，就会进入下个阶段，由于下两个阶段（check和close callback）都没有绑定函数，那么就会重新回到timers，此时timers中有函数就推进主线程中执行，所以，最后输出的结果是延迟了<strong>105ms</strong></li>
</ol>
<p>但是，现在有一个问题，如果<code>fs.read()</code>要执行很长时间，那岂不是导致阻塞了吗？答案是：否；</p>
<p>先看一下官方文章里面的几个句子：</p>
<blockquote>
<p>Note: Technically, the poll phase controls when timers are executed.</p>
<p>When the event loop enters the poll phase, it has an empty queue (fs.readFile() has not completed), so it will wait for the number of ms remaining until the soonest timer’s threshold is reached. </p>
<p>Once the poll queue is empty the event loop will check for timers whose time thresholds have been reached. If one or more timers are ready, the event loop will wrap back to the timers phase to execute those timers’ callbacks.</p>
</blockquote>
<p>上面第一个句子说明了<strong>timers</strong>其实是受到<strong>poll</strong>影响的，后面两句说明了如果<code>fs.read()</code>执行的时间太长，超过了timers设定的时间，EventLoop会将timers绑定的函数推到主线程中执行（下面讲解poll的时候会解释），这样避免了阻塞问题</p>
<h4 id="2-1-3-poll"><a href="#2-1-3-poll" class="headerlink" title="2.1.3 poll"></a><strong>2.1.3 poll</strong></h4><p>这个阶段的功能是最复杂的。先看一下官方文档的解释：</p>
<blockquote>
<p>The poll phase has two main functions:</p>
<ul>
<li>Executing scripts for timers whose threshold has elapsed, </li>
<li>then Processing events in the poll queue.</li>
</ul>
<p>When the event loop enters the poll phase and there are no timers scheduled, one of two things will happen:</p>
<ul>
<li>If the poll queue is not empty, the event loop will iterate through its queue of callbacks executing them synchronously until either the queue has been exhausted, or the system-dependent hard limit is reached.</li>
<li>If the poll queue is empty, one of two more things will happen:</li>
</ul>
<ul>
<li>If scripts have been scheduled by setImmediate(), the event loop will end the poll phase and continue to the check phase to execute those scheduled scripts.</li>
</ul>
<ul>
<li>If scripts have not been scheduled by setImmediate(), the event loop will wait for callbacks to be added to the queue, then execute them immediately.</li>
</ul>
<p>Once the poll queue is empty the event loop will check for timers whose time thresholds have been reached. If one or more timers are ready, the event loop will wrap back to the timers phase to execute those timers’ callbacks.</p>
</blockquote>
<p>首先，上面的这段话说明了<strong>poll</strong>具有两个功能：</p>
<ul>
<li>执行那些时间到达的计时器绑定的函数</li>
<li>处理轮询队列中的事件</li>
</ul>
<p>也就是说通过setTimeout绑定的回调函数有可能会在两个阶段被推到主线程中执行：<strong>timers和poll</strong>（下面会给出例子解释），但是timers绑定的函数能够在poll阶段被执行的条件是：<strong>计时器计时结束</strong>（下面会有例子解释）</p>
<p>poll的这个阶段回调函数执行还分多种情况：</p>
<ul>
<li>当事件队列进入<strong>poll</strong>阶段，同时没有计时器计时结束时，如果<strong>poll</strong>不是空的，那么就先执行poll里面的回调函数。如果poll是空的同时没有<code>setimmedaite</code>绑定的回调函数，那么EventLoop会直接停留在poll阶段，直到有新的回调函数被加入到事件队列中。如果有<code>setImmediate</code>绑定的函数，则会进入到下个阶段check。</li>
<li>如果事件队列进入到<strong>poll</strong>阶段并且poll是空的，且有计时器计时结束，事件队列会回到timers，然后执行timers绑定的函数</li>
</ul>
<p>还是上面那个例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">const fs = require(&apos;fs&apos;);</div><div class="line"></div><div class="line">function someAsyncOperation(callback) &#123;</div><div class="line">  // Assume this takes 95ms to complete</div><div class="line">  fs.readFile(&apos;/path/to/file&apos;, callback);</div><div class="line">&#125;</div><div class="line"></div><div class="line">const timeoutScheduled = Date.now();</div><div class="line"></div><div class="line">setTimeout(() =&gt; &#123;</div><div class="line">  const delay = Date.now() - timeoutScheduled;</div><div class="line"></div><div class="line">  console.log(`$&#123;delay&#125;ms have passed since I was scheduled`);</div><div class="line">&#125;, 100);</div><div class="line"></div><div class="line"></div><div class="line">// do someAsyncOperation which takes 95 ms to complete</div><div class="line">someAsyncOperation(() =&gt; &#123;</div><div class="line">  const startCallback = Date.now();</div><div class="line"></div><div class="line">  // do something that will take 10ms...</div><div class="line">  while (Date.now() - startCallback &lt; 10) &#123;</div><div class="line">    // do nothing</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>具体的解释可以看上面</p>
<h3 id="2-2-setTimeout和setImmediate"><a href="#2-2-setTimeout和setImmediate" class="headerlink" title="2.2 setTimeout和setImmediate"></a><strong>2.2 setTimeout和setImmediate</strong></h3><p>两者在很多方面和相似，但是他们的区别还是很大的，而且setTimeout具有的一个缺点是时间的不确定性。先来看看官方给的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">// timeout_vs_immediate.js</div><div class="line">setTimeout(() =&gt; &#123;</div><div class="line">  console.log(&apos;timeout&apos;);</div><div class="line">&#125;, 0);</div><div class="line"></div><div class="line">setImmediate(() =&gt; &#123;</div><div class="line">  console.log(&apos;immediate&apos;);</div><div class="line">&#125;);</div><div class="line">//结果</div><div class="line">$ node timeout_vs_immediate.js</div><div class="line">immediate</div><div class="line">timeout</div><div class="line"></div><div class="line">$ node timeout_vs_immediate.js</div><div class="line">immediate</div><div class="line">timeout</div></pre></td></tr></table></figure></p>
<p>可以看到可能有两种结果，为什么呢？因为虽然setTimeout的时间设置为0，但是实际上系统会将其设置为1，所以如果上面的同步代码解析到setImmediate时时间小于1ms，那么就会先将setImmediate加入到事件队列中，反之，则会是将setTimeout加入到事件队列中。</p>
<p>再来看看下面这个例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// timeout_vs_immediate.js</div><div class="line">const fs = require(&apos;fs&apos;);</div><div class="line"></div><div class="line">fs.readFile(__filename, () =&gt; &#123;</div><div class="line">  setTimeout(() =&gt; &#123;</div><div class="line">    console.log(&apos;timeout&apos;);</div><div class="line">  &#125;, 0);</div><div class="line">  setImmediate(() =&gt; &#123;</div><div class="line">    console.log(&apos;immediate&apos;);</div><div class="line">  &#125;);</div><div class="line">&#125;);</div><div class="line">//</div><div class="line">$ node timeout_vs_immediate.js</div><div class="line">immediate</div><div class="line">timeout</div><div class="line"></div><div class="line">$ node timeout_vs_immediate.js</div><div class="line">immediate</div><div class="line">timeout</div></pre></td></tr></table></figure></p>
<p>上面这个例子只有一种结果，这是为什么呢？因为首先会进行文件的读取，然后就会将<code>fs.readFile</code>的回调函数加入到事件队列中，文件读取结束后执行回调函数，此时EventLoop还没有到达check这个阶段，文件读取绑定回调函数中分别在timers和check阶段绑定了回调函数，所以EventLoop经过poll阶段后进入check阶段执行<code>setImmediate</code>绑定的函数，然后再绕回timers执行<code>setTimeout</code>绑定的函数，这样就得到上面的结果。</p>
<h3 id="2-3-process-nextTick-和setImmediate"><a href="#2-3-process-nextTick-和setImmediate" class="headerlink" title="2.3 process.nextTick()和setImmediate()"></a><strong>2.3 process.nextTick()和setImmediate()</strong></h3><p>这两个方法的实际用途和他们的名字相反，前者是当前的同步执行结束后直接执行其绑定的函数，而setImmediate是只在check阶段才执行。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/15/asy-md/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhengpq">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhengpq">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/15/asy-md/" itemprop="url">异步</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-15T14:59:22+08:00">
                2018-03-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-同步与异步"><a href="#1-同步与异步" class="headerlink" title="1 同步与异步"></a>1 同步与异步</h2><p>简单来说，单线程对应就是<strong>同步</strong>，同步执行中每个动作只能等前面那个执行完后才会执行下一个，这样的话如果出现多个执行动作，就会出现时间先后，有可能中间某个动作占用的时间过于长的话就会造成后面的动作一直等待。但是如果是异步呢，多个人进行组装，每个人负责不同的部分，这样的话每个人完成自己的部分之后就可以u干别的事情，而不用去一直等待，这样的效率显然是更高的。</p>
<h2 id="2-Event-Loop"><a href="#2-Event-Loop" class="headerlink" title="2 Event Loop"></a>2 Event Loop</h2><p>讲到JavaScript的异步的话肯定要讲到Event Loop，这是JavaScript异步的精髓。首先介绍一下一个很经典的视频（需要翻墙，国内可能也有，需要读者自己去找一下）：<a href="https://www.youtube.com/watch?v=8aGhZQkoFbQ" target="_blank" rel="external">What the heck is the event loop anyway?</a></p>
<p>这里借用阮一峰老师的博客上面的图片：</p>
<div align="center"><img src="http://static.zybuluo.com/Dreamingboy/bep0svacdq2w5o9w349190cu/bg2014100802.png" width="400"></div>

<p>上面这张图片展示了js代码的执行过程。最主要的三个部分就是<strong>stack</strong>、<strong>callback queue</strong>和<strong>WebAPIS</strong></p>
<h3 id="2-1-stack"><a href="#2-1-stack" class="headerlink" title="2.1 stack"></a>2.1 stack</h3><p><strong>stack</strong>可以理解成js函数执行的地方。先看看下面这个例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">function fun1()&#123;</div><div class="line">    console.log(&quot;this is a stack&quot;);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">function fun2()&#123;</div><div class="line">    fun1();</div><div class="line">&#125;;</div><div class="line"></div><div class="line">function fun3()&#123;</div><div class="line">    fun2()</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>上面这段代码的执行顺序是：</p>
<ul>
<li>fun3入栈</li>
<li>fun2入栈</li>
<li>fun1入栈</li>
<li><code>console.log(&quot;this is a stack&quot;)</code></li>
<li>fun1出栈</li>
<li>fun2出栈</li>
<li>fun3出栈</li>
</ul>
<p>上面这个例子很好地说明了js代码的执行机制。</p>
<p><font color="red">而且有点需要注意的是stack里面执行的是同步函数，这一点下面会讲解</font></p>
<h3 id="2-2-WebAPI"><a href="#2-2-WebAPI" class="headerlink" title="2.2 WebAPI"></a>2.2 WebAPI</h3><p>WebAPI可以看成是临时存储异步命令的地方。</p>
<h3 id="2-3-callback-queue"><a href="#2-3-callback-queue" class="headerlink" title="2.3 callback queue"></a>2.3 callback queue</h3><p>callback queue一种更加通俗的说法是<strong>任务队列</strong>，任务队列是各种等待执行的任务，<strong>当stack处于清空状态的时候stack就会从任务队列中调用任务进行执行，而且这个过程会一直持续直到任务队列为空</strong></p>
<h3 id="2-4-Event-Loop运行过程"><a href="#2-4-Event-Loop运行过程" class="headerlink" title="2.4 Event Loop运行过程"></a>2.4 Event Loop运行过程</h3><ul>
<li>首先执行stack里面的函数</li>
<li>如果在stack执行过程中有异步命令产生，就会将其传送到WebAPI中。然后按照顺序将异步命令中的回调函数加入到任务队列中，但是setTimeOut和Ajax以及setInterval会有差异，<strong>setTimeOut和setInterval会在指定时间后才将回调函数加入到任务队列中（下面有一个例子会讲到），而Ajax请求则是会在请求完成之后才将回调函数加入带任务队列中。</strong></li>
<li>等到stack中的同步函数执行完毕后stack就会开始执行任务队列中的回调函数直到任务队列为空</li>
<li>重复执行上面这几个操作步骤</li>
</ul>
<p>下面来看例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">console.log(4);</div><div class="line">setTimeout(function cb()&#123;</div><div class="line">    console.log(&quot;there&quot;);</div><div class="line">&#125;,0);</div><div class="line">function fun1()&#123;</div><div class="line">    console.log(&quot;this&quot;);</div><div class="line">&#125;</div><div class="line">fun1();</div><div class="line">//</div><div class="line">结果：</div><div class="line">4</div><div class="line">this</div><div class="line">there</div></pre></td></tr></table></figure></p>
<p>上面这个例子很好地说明了任务队列里面的回调函数只有在stack里面的同步函数执行完毕之后才会开始执行。因为如果不是等待stack里面的同步函数执行完的话，那么一开始打印出来的应该是“there”而不是“this”</p>
<h2 id="3-实现异步"><a href="#3-实现异步" class="headerlink" title="3 实现异步"></a>3 实现异步</h2><p>由于目前学习知识有限，我先针对自己学习的知识点讲解两种异步的实现方法</p>
<h3 id="3-1-回调函数模式"><a href="#3-1-回调函数模式" class="headerlink" title="3.1 回调函数模式"></a>3.1 回调函数模式</h3><p>先看一个最简单的例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">function fun3()&#123;</div><div class="line">    console.log(3);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">function fun2(fun)&#123;</div><div class="line">    setTimeout(fun(),1000)</div><div class="line">&#125;;</div><div class="line"></div><div class="line">fun2(fun3);//3</div></pre></td></tr></table></figure></p>
<p>但是这种模式只适合需要调用少量函数的情况，在某些复杂的情况下可能会出现所谓的“回调地狱”，比如下面这个例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">fun1(function()&#123;</div><div class="line">    fun2(function()&#123;</div><div class="line">        fun3(function()&#123;</div><div class="line">            fun4(function()&#123;</div><div class="line">                fun5()</div><div class="line">            &#125;)</div><div class="line">        &#125;)</div><div class="line">    &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="3-2-Promise"><a href="#3-2-Promise" class="headerlink" title="3.2 Promise"></a>3.2 Promise</h3><p>先看看Promise的最简单的例子<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">let promise = new Promise(function (resolve,reject) &#123;</div><div class="line">    if (dosomething/*异步操作成功*/) &#123;</div><div class="line">        resolve();</div><div class="line">    &#125;else &#123;</div><div class="line">        reject();</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">promise.then(fun1,fun2);</div><div class="line"></div><div class="line">//使用promise实现settimeout</div><div class="line">let promise = function (fun1,fun2) &#123;</div><div class="line">    return new Promise(function (fun1,fun2) &#123;</div><div class="line">        setTimeout(fun1,1000);</div><div class="line">    &#125;);</div><div class="line">&#125;;</div><div class="line">promise().then(function () &#123;</div><div class="line">    console.log(&apos;YOU&apos;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>来看看在Node使用Promise实现文件读取的例子<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">//promise实现文件读取</div><div class="line">const fs = require(&apos;fs&apos;);</div><div class="line"></div><div class="line">//使用回调函数实现</div><div class="line"></div><div class="line">fs.readFile(&apos;try.html&apos;,(err,data)=&gt;&#123;</div><div class="line">    if (err) &#123;</div><div class="line">        console.log(&apos;something wrong&apos;);</div><div class="line">    &#125;</div><div class="line">    console.log(data);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">//promise化</div><div class="line">function getFile(url) &#123;</div><div class="line">    return new Promise(function (resolve,reject) &#123;</div><div class="line">        fs.readFile(url,function (err,data) &#123;</div><div class="line">            if (err) &#123;</div><div class="line">                reject(err);</div><div class="line">            &#125;else &#123;</div><div class="line">                resolve(data)</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">getFile(&apos;try.html&apos;).then(function (data) &#123; console.log(data); &#125;).catch((err)=&gt;&#123;throw er</div></pre></td></tr></table></figure></p>
<p>Promise的实现异步的关键在于使用Promise封装异步操作，然后再返回一个新的Promise对象，实现链式调用。<br>再来看看Promise是怎么解决多层调用的问题的，比如现在有三个文件要读取，但是只能在前一个文件读取完毕之后又才能进入下一个文件的读取，下面展示回调函数形式和Promise形式实现的区别<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">//回调函数</div><div class="line">fun1(function()&#123;</div><div class="line">    fun2(function()&#123;</div><div class="line">        fun3(function()&#123;</div><div class="line">            fun4(function()&#123;</div><div class="line">                fun5()</div><div class="line">            &#125;)</div><div class="line">        &#125;)</div><div class="line">    &#125;)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">//Promise</div><div class="line">function getFile(url) &#123;</div><div class="line">    return new Promise(function (resolve,reject) &#123;</div><div class="line">        fs.readFile(url,function (err,data) &#123;</div><div class="line">            if (err) &#123;</div><div class="line">                reject(err);</div><div class="line">            &#125;else &#123;</div><div class="line">                resolve(data)</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">getFile(&apos;try.html&apos;).then(getFile(&apos;fs.js&apos;)).then(getFile(&apos;hello.txt&apos;)).then(()=&gt;&#123;console.log(&apos;success&apos;);&#125;).catch(()=&gt;&#123; throw err&#125;);</div></pre></td></tr></table></figure></p>
<p><strong>所以，使用Promise的关键点在于将原本的回调变成Promise中的resolve，然后返回一个新的Promise对象。</strong></p>
<p>Promise的有趣之处还在于其提供的<code>Promise.all()</code>和<code>Promise.race</code>两个方法。</p>
<p>Promise.all()将多个Promise实例包装成一个新的Promise实例，接收一个数组作为参数。</p>
<ul>
<li>只有所有的Promise实例状态变成fullfilled时，all才会变成fulfilled</li>
<li>只要有一个实例的状态时rejected，那么all的状态就是rejected</li>
</ul>
<p>上面的例子其实也可以使用Promise来进行修改，如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">let p1 = getFile(&apos;try.html&apos;);</div><div class="line">let p2 = getfs(&apos;fs.js&apos;);</div><div class="line">let p3 = getHello(&apos;hello.txt&apos;);</div><div class="line">let p = Promise.all([p1,p2,p3]);</div><div class="line">p.then((data)=&gt;&#123;console.log(data);&#125;).catch((err)=&gt;&#123;throw err&#125;);//返回三个文件的data，存于一个数组中</div><div class="line">//这种写法的好处是可以几个异步同时进行，节省时间</div></pre></td></tr></table></figure></p>
<p>Promise.race()格式和Promise.all()一样，但是不同的地方在于只要p中的一个promise的状态改变，race的状态发生改变。</p>
<h3 id="3-3-Generator实现异步"><a href="#3-3-Generator实现异步" class="headerlink" title="3.3 Generator实现异步"></a>3.3 Generator实现异步</h3><p>还是上面那个例子，使用generator+co模块实现的代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">function getFile(url) &#123;</div><div class="line">    fs.readFile(url,function (err,data) &#123;</div><div class="line">        return new Promise(function (resolve,reject) &#123;</div><div class="line">            if (err) &#123;</div><div class="line">                reject();</div><div class="line">            &#125;</div><div class="line">            resolve();</div><div class="line">        &#125;);</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">//引入co模块辅助自动执行</div><div class="line">co(function* ()&#123;</div><div class="line">    var f1 = yield readFile(&apos;fs.js&apos;);</div><div class="line">    var f2 = yield readFile(&apos;try.js&apos;);</div><div class="line">    console.log(f1);</div><div class="line">    console.log(f2);</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="3-4-async-await"><a href="#3-4-async-await" class="headerlink" title="3.4 async/await"></a>3.4 async/await</h3><p>使用async函数实现上面的异步代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">async function getfs() &#123;</div><div class="line">    let f1 = await getFile(&apos;try.html&apos;);</div><div class="line">    let f2 = await getFile(&apos;fs.js&apos;);</div><div class="line">    return f1;</div><div class="line">&#125;</div><div class="line">getfs().then((f1)=&gt;&#123;console.log(f1);&#125;);</div></pre></td></tr></table></figure></p>
<p>需要注意的有以下几点：</p>
<ul>
<li>asyn函数返回一个Promise对象</li>
<li>返回的Promise对象必须等到内部所有await命令的Promise对象执行完毕后，才会发生状态的改变</li>
<li>await后面必须接一个Promise对象，否则其会被转化为Promise对象</li>
<li>只要有一个await后面的Promise变为reject，那么整个async就会中断执行</li>
<li>一旦遇到await，就会等到await执行完毕后再执行后面的代码。</li>
<li><p>捕获错误时，最好将await放在<code>try...catch</code>中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">async function getfs() &#123;</div><div class="line">    let f1=await getFile(&apos;try.html&apos;).catch((error)=&gt;&#123; throw error&#125;);</div><div class="line">    let f2 = await getFile(&apos;fs.js&apos;);</div><div class="line">    return f1;</div><div class="line">&#125;</div><div class="line">getfs().then((f1)=&gt;&#123;console.log(f1);&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>对于不存在继发关系的多个异步操作，为节省时间最好同时触发</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let [foo, bar] = await Promise.all([getFoo(), getBar()]);</div></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/08/flex/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhengpq">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhengpq">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/08/flex/" itemprop="url">flex</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-08T22:14:35+08:00">
                2018-03-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/html-css/" itemprop="url" rel="index">
                    <span itemprop="name">html&&css</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>因为老是记不住flex的API对应的样式，所以这篇文章主要就是让自己平时用的时候可以快速查阅，节约时间。</p>
<p>flex布局是CSS3中提出的概念，其优点在于能够使用很少的样式实现比较复杂的布局，相比CSS2中的使用display+position+float的实现方式，类似于高铁和绿皮火车之间的差别。</p>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a><strong>语法</strong></h2><p>块状元素实现flex布局：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">div&#123;display:flex;&#125;</div></pre></td></tr></table></figure></p>
<p>行内元素实现flex布局：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">div&#123;display:inline-flex;&#125;</div></pre></td></tr></table></figure></p>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a><strong>基本概念</strong></h2><p>容器flex化之后，其内部解构如下（<strong>这里借用一下阮老师的图</strong>）：</p>
<p><img src="http://static.zybuluo.com/Dreamingboy/52n9lnghbocua1x01sqhnat2/image.png" alt="image.png-29kB"></p>
<p>flex item：容器内部的元素<br>main axis：主轴，内部元素默认沿着主轴排列<br>main start：主轴开始的地方<br>main end：主轴结束的地方<br>cross axis：交叉轴<br>cross start：交叉轴开始的地方<br>cross end：交叉轴结束的地方<br>main size：单个内部元素在主轴方向上占据的长度<br>cross size：单个内部元素在交叉轴方向上占据的长度</p>
<h2 id="属性及其值"><a href="#属性及其值" class="headerlink" title="属性及其值"></a><strong>属性及其值</strong></h2><ul>
<li><code>flex-direction:row | row-reverse | column | column-reverse</code></li>
<li><code>flex-wrap:nowrap | wrap | wrap-reverse</code></li>
<li><code>flex-flow:&lt;flex-direction | &lt;flex-wrap&gt;</code></li>
<li><code>justify-content:flex-start | flex-end | cneter | space-between | space-around</code></li>
<li><code>align-items: flex-start | flex-end | center | baseline | stretch</code></li>
<li><code>align-content: flex-start | flex-end | center | space-between | space-around | stretch;</code></li>
</ul>
<h3 id="flex-direction"><a href="#flex-direction" class="headerlink" title="flex-direction"></a><strong>flex-direction</strong></h3><p>定义主轴的方向</p>
<ul>
<li>row：默认，主轴的方向为水平，起点在左端</li>
<li>row-reverse：主轴为水平，起点在右端</li>
<li>column：主轴为竖直方向，起点在顶端</li>
<li>column-reverse：主轴为竖直方向，起点在底端</li>
</ul>
<p>对flex盒子的内部元素进行width的设置时，实际上相当于是给元素设置了一个<code>max-width</code>，如下面例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">#flex&#123;</div><div class="line">            width: 800px;</div><div class="line">            height: 400px;</div><div class="line">            display: flex;</div><div class="line">            background-color: blue;</div><div class="line">        &#125;</div><div class="line">        #flex div&#123;</div><div class="line">            background-color: red;</div><div class="line">            width: 100px;</div><div class="line">            height: 100px;</div><div class="line">            margin-right: 10px;</div><div class="line">        &#125;</div></pre></td></tr></table></figure></p>
<p>得到的效果如下：<br><img src="http://static.zybuluo.com/Dreamingboy/figy1ko3m8gporg4qjfi48at/image.png" alt="image.png-3.2kB"></p>
<p>明显此时每个内部元素的大小是没有100px的，将<code>width: 100px;</code>设置为<code>min-width: 100px;</code>后，得到下面的结果：</p>
<p><img src="http://static.zybuluo.com/Dreamingboy/i0qofmjig8gq2ptq7u9uxyht/image.png" alt="image.png-6.5kB"></p>
<p>这次盒子全部溢出了。</p>
<h3 id="flex-wrap"><a href="#flex-wrap" class="headerlink" title="flex-wrap"></a><strong>flex-wrap</strong></h3><p>定义是否允许换行。</p>
<ul>
<li>nowrap：默认，不换行，如上面所示，如果内部的元素全部width加起来大于flex盒子的width，会将内部元素的width减小以适应flex盒子的width</li>
<li>wrap：允许换行</li>
<li>wrap-reverse：换行，但是第一行变成在下方</li>
</ul>
<p>如下面的效果：</p>
<p><img src="http://static.zybuluo.com/Dreamingboy/q88g2gl27vxgdhu5i66jzdil/image.png" alt="image.png-12kB"></p>
<h3 id="flex-flow"><a href="#flex-flow" class="headerlink" title="flex-flow"></a><strong>flex-flow</strong></h3><p>是<code>flex-direction</code>和<code>flex-wrap</code>的简写形式</p>
<h3 id="justify-content"><a href="#justify-content" class="headerlink" title="justify-content"></a><strong>justify-content</strong></h3><p>定义内部元素在主轴上的对齐方式</p>
<ul>
<li>flex-start：跟主轴起始点对齐</li>
<li>flex-end：跟主轴结束点对齐</li>
<li>center：居中</li>
<li>space-between：两端对齐，内部元素之间的间隔相等</li>
<li>space-around：每个内部元素两侧的间隔相等</li>
</ul>
<h3 id="align-items"><a href="#align-items" class="headerlink" title="align-items"></a><strong>align-items</strong></h3><p>定义内部元素在交叉轴上如何对齐</p>
<ul>
<li>flex-star：跟交叉轴的起点对齐</li>
<li>flex-end：跟交叉轴的终点对齐</li>
<li>center：交叉轴的中心点对齐</li>
<li>baseline：内部元素的第一行文字对齐</li>
<li>stretch：如果内部元素没有设置高度，将占满整个容器的高度</li>
</ul>
<h3 id="align-content"><a href="#align-content" class="headerlink" title="align-content"></a><strong>align-content</strong></h3><p>定义多根轴线的对齐方式，如果只有一个轴线，那么属性不起作用</p>
<ul>
<li>flex-start：与交叉轴的起点对齐</li>
<li>flex-end：与交叉轴的终点对齐</li>
<li>center：与交叉轴的中点对齐</li>
<li>space-between：与交叉轴两端对齐，轴线之间的间隔平均分布</li>
<li>space-between：每根轴线两侧的间隔相等，</li>
<li>stretch：轴线平均分布在交叉轴上面</li>
</ul>
<h2 id="内部元素的属性"><a href="#内部元素的属性" class="headerlink" title="内部元素的属性"></a><strong>内部元素的属性</strong></h2><h3 id="order"><a href="#order" class="headerlink" title="order"></a><strong>order</strong></h3><p>定义内部元素的排列顺序，默认是0，数值越小越靠前。</p>
<h3 id="flex-grow"><a href="#flex-grow" class="headerlink" title="flex-grow"></a><strong>flex-grow</strong></h3><p>定义内部元素被放大的比例，默认是0<br>如果所有内部元素被放大的比例都是1，而且还有剩余空间的话，那么所有内部元素都会平分剩余的空间。<strong>但是如果设置放大比例后容器的width不够的话，就不会进行元素的放大，而是会将剩余的空间按照放大的倍数分配给内部元素（如果有的话）</strong></p>
<h3 id="flex-shrink"><a href="#flex-shrink" class="headerlink" title="flex-shrink"></a><strong>flex-shrink</strong></h3><p>定义内部元素缩小的比例，如果空间不够的话，就会缩小内部元素<br><strong>如果有一个元素的缩小比例为0，而其他的为0以外的数字，那前者在空间不足的时候不会缩小</strong></p>
<h3 id="flex-basis"><a href="#flex-basis" class="headerlink" title="flex-basis"></a><strong>flex-basis</strong></h3><p>定义在分配多余空间之前，内部元素的main size</p>
<h3 id="flex"><a href="#flex" class="headerlink" title="flex"></a><strong>flex</strong></h3><p>flex-grow、flex-shrink和flex-basis的简写</p>
<h3 id="align-self"><a href="#align-self" class="headerlink" title="align-self"></a><strong>align-self</strong></h3><p>允许单个元素与其他项目有不一样的对齐方式，可以覆盖align-item属性</p>
<ul>
<li>auto</li>
<li>flex-start</li>
<li>flex-end</li>
<li>center</li>
<li>baseline</li>
<li>stretch</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/08/html和css知识点总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhengpq">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhengpq">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/08/html和css知识点总结/" itemprop="url">html和css知识点总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-08T14:19:26+08:00">
                2018-03-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/html-css/" itemprop="url" rel="index">
                    <span itemprop="name">html&&css</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这篇文章是对HTML和CSS一些知识点的总结，希望对大家有所帮助</p>
<h2 id="1-HTML"><a href="#1-HTML" class="headerlink" title="1 HTML"></a><strong>1 HTML</strong></h2><h3 id="1-1Doctype"><a href="#1-1Doctype" class="headerlink" title="1.1Doctype"></a><strong>1.1Doctype</strong></h3><p>1、Doctype<br>作用：声明文档类型，告知浏览器使用哪种方式对文档进行解析，</p>
<p>HTML 4.01各种Doctype声明格式以及区别：</p>
<ul>
<li>Strict：<code>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;</code><br><strong>包含所有的HTML元素和属性，但是不包含过时的元素</strong></li>
<li>Transitional：<code>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</code><br><strong>包含所有的HTML元素和属性，同时包含过时的元素，框架集不允许</strong></li>
<li>Frameset：<code>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Frameset//EN&quot; &quot;http://www.w3.org/TR/html4/frameset.dtd&quot;&gt;</code><br><strong>包含所有的HTML元素和属性，包含过时元素，框架集允许</strong></li>
</ul>
<p>HTML5Doctype的声明：<code>&lt;!DOCTYPE HTML&gt;</code><br>HTML5没有基于SGML（<a href="https://zh.wikipedia.org/wiki/SGML" target="_blank" rel="external">标准通用标记语言，超文本格式的最高标准</a>）</p>
<h3 id="1-2-Meta"><a href="#1-2-Meta" class="headerlink" title="1.2 Meta"></a><strong>1.2 Meta</strong></h3><p>Meta包含在head元素中，能够对文档进行声明，比如SEO,文档的字符编码</p>
<p>具体作用：</p>
<ul>
<li>声明文档使用的字符编码：<code>&lt;meta charset=&#39;utf-8&#39;&gt;</code></li>
<li><p>声明文档的兼容模式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt; 指示IE以目前可用的最高模式显示内容</div><div class="line">&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=Emulate IE7&quot; /&gt;指示IE使用 &lt;!DOCTYPE&gt; 指令确定如何呈现内容。标准模式指令以IE7 标准模式显示，而 Quirks 模式指令以 IE5 模式显示。</div></pre></td></tr></table></figure>
</li>
<li><p>SEO优化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;meta name=&quot;description&quot; content=&quot;不超过150个字符&quot; /&gt;页面描述</div><div class="line">&lt;meta name=&quot;keywords&quot; content=&quot;关键字&quot;/&gt;页面关键词</div><div class="line">&lt;meta name=&quot;author&quot; content=&quot;魔法小栈&quot; /&gt;定义网页作者</div><div class="line">&lt;meta name=&quot;robots&quot; content=&quot;index,follow&quot; /&gt;定义网页搜索引擎索引方式，robotterms是一组使用英文逗号「,」分割的值，通常有如下几种取值：none，noindex，nofollow，all，index和follow。</div></pre></td></tr></table></figure>
</li>
<li><p>移动端添加viewport</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;meta name =&quot;viewport&quot; content =&quot;width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no&quot;&gt;</div><div class="line">经常用在响应式中:</div><div class="line">width：可视区域的宽度，device-width：设备屏幕的宽度，可以自适应多端设备</div><div class="line">initial-scale  初始缩放比例</div><div class="line">maximum-scale  最大缩放比例</div><div class="line">minimum-scale  最小缩放比例</div><div class="line">user-scalable  是否允许用户缩放(yes/no)</div></pre></td></tr></table></figure>
</li>
<li><p>页面出现很多的http请求时自动转换成https：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;upgrade-insecure-requests&quot; /&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="1-3行内元素、块级元素以及空元素的区别"><a href="#1-3行内元素、块级元素以及空元素的区别" class="headerlink" title="1.3行内元素、块级元素以及空元素的区别"></a><strong>1.3行内元素、块级元素以及空元素的区别</strong></h3><p>1、行内元素是在同一行排列直到宽度不够转入下行，块级元素默认换行排列<br>2、行内元素没有办法设置width、height、padding和margin，块状元素可以<br>3、vertical-align只能作用在行内元素不能作用在块级元素<br>4、<code>display:block</code>：字面上将一个元素设置为块级的<br>5、<code>display:inline-block</code>：字面上将一个元素设置为行内元素，<strong>但是这种行内元素能够设置width、height、margin和padding</strong></p>
<h3 id="1-4页面导入样式方式"><a href="#1-4页面导入样式方式" class="headerlink" title="1.4页面导入样式方式"></a><strong>1.4页面导入样式方式</strong></h3><p>1、在head插入<code>&lt;style&gt;&lt;/style&gt;</code>标签<br>2、嵌入<code>style=&quot;&quot;</code><br>3、link引入文件<br>4、@import中引入另外一个CSS文件（存在兼容性问题，只能在IE5以上才会兼容）</p>
<h3 id="1-5浏览器内核"><a href="#1-5浏览器内核" class="headerlink" title="1.5浏览器内核"></a><strong>1.5浏览器内核</strong></h3><ul>
<li>Trident内核：IE、360</li>
<li>Gecko：火狐</li>
<li>Presto：Opera</li>
<li>Webkit：Chrome、Safari</li>
</ul>
<h2 id="2-CSS"><a href="#2-CSS" class="headerlink" title="2 CSS"></a><strong>2 CSS</strong></h2><h3 id="2-1盒子模型"><a href="#2-1盒子模型" class="headerlink" title="2.1盒子模型"></a><strong>2.1盒子模型</strong></h3><p>W3C制定的标准的盒子模型如下图：<br><img src="http://static.zybuluo.com/Dreamingboy/k1wdxmd3zkfqappzn1sptk3e/image.png" alt="image.png-194kB"></p>
<p> IE早期版本的盒子模型：<br> <img src="http://static.zybuluo.com/Dreamingboy/3rs1nf0s5lfq26hni0gvbjyy/image.png" alt="image.png-145.8kB"></p>
<p>二者最大的区别在于Content区域，后者的width和height都包括了padding和border</p>
<p> 对盒子模型的设置：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">box-sizing:content-box;(默认）//页面使用标准模式进行解析</div><div class="line">box-sizing:border-box;//使用怪异模式</div><div class="line">box-sizing:inherit;//页面从父元素继承box-sizing的值</div></pre></td></tr></table></figure></p>
<h3 id="2-2选择器"><a href="#2-2选择器" class="headerlink" title="2.2选择器"></a><strong>2.2选择器</strong></h3><p>CSS中除了平时经常用的选择器如id、类和父子选择器外，还有一些不经常用的选择器：</p>
<ul>
<li>相邻选择器：<code>ul+p</code>，选择和ul同辈的<strong>后面</strong>的第一个p元素</li>
<li>属性选择器：<code>li[name=&#39;bob&#39;]</code>，选择所有name属性为bob的li元素，name属性需要自己添加</li>
<li>a系列的伪类选择器：a:link，a:visited，a:hover，a:acitve，分别代表未访问的链接、已经访问的链接、鼠标悬停时的链接、被点击的链接</li>
</ul>
<h3 id="2-3居中"><a href="#2-3居中" class="headerlink" title="2.3居中"></a><strong>2.3居中</strong></h3><p>1、水平居中：给盒子设置一个确定的width，然后添加margin:0 auto<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#center&#123;</div><div class="line">            width: 300px;</div><div class="line">            margin:0 auto;</div><div class="line">        &#125;</div></pre></td></tr></table></figure></p>
<p>2、绝对定位的div居中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">#absolute&#123;</div><div class="line">            position: absolute;</div><div class="line">            width:300px;</div><div class="line">            margin-left: -150px;</div><div class="line">            left:50%;</div><div class="line">        &#125;</div></pre></td></tr></table></figure></p>
<p>3、绝对垂直居中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">//缺点：元素的宽高必须是具体值或者是百分比</div><div class="line">#absolute-center&#123;</div><div class="line">            position: absolute;</div><div class="line">            width: 100px;</div><div class="line">            height:100px;</div><div class="line">            top: 0;</div><div class="line">            left:0;</div><div class="line">            right: 0;</div><div class="line">            bottom: 0;</div><div class="line">            margin: auto;</div><div class="line">            background-color: black;</div><div class="line">        &#125;</div><div class="line"> //利用translate是百分比是相对于自身的width和height      </div><div class="line">#absolute-center&#123;</div><div class="line">            position: absolute;</div><div class="line">            width: 10%;</div><div class="line">            height:10%;</div><div class="line">            top: 50%;</div><div class="line">            left:50%;</div><div class="line">            transform: translate(-50%,-50%);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">//使用flex布局</div><div class="line">.container &#123;</div><div class="line">    display: flex;</div><div class="line">    align-items: center;        /* 垂直居中 */</div><div class="line">    justify-content: center;    /* 水平居中 */</div><div class="line"></div><div class="line"> &#125;</div><div class="line"> .container div &#123;</div><div class="line">    width: 100px;</div><div class="line">    height: 100px;</div><div class="line">    background-color: pink;     /* 方便看效果 */</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<h3 id="2-4清除浮动"><a href="#2-4清除浮动" class="headerlink" title="2.4清除浮动"></a><strong>2.4清除浮动</strong></h3><p>清除浮动的原因是在使用浮动之后，元素会脱离文档流，类似于将浮动的元素抽离出来，浮动在上方，而文档在下方，分成两层。这样就会造成塌陷。最经典的例子就是在圣杯布局里面。</p>
<p>先看下面这圣杯布局的代码以及效果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">//html</div><div class="line">&lt;body&gt;</div><div class="line">&lt;div id=&quot;header&quot;&gt;#header&lt;/div&gt;</div><div class="line"></div><div class="line">&lt;div id=&quot;container&quot;&gt;</div><div class="line">    &lt;div id=&quot;center&quot; class=&quot;column&quot;&gt;#center&lt;/div&gt;</div><div class="line">    &lt;div id=&quot;left&quot; class=&quot;column&quot;&gt;#left&lt;/div&gt;</div><div class="line">    &lt;div id=&quot;right&quot; class=&quot;column&quot;&gt;#right&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line"></div><div class="line">&lt;div id=&quot;footer&quot;&gt;#footer&lt;/div&gt;</div><div class="line">&lt;/body&gt;</div><div class="line"></div><div class="line">//css</div><div class="line">body &#123;</div><div class="line">            min-width: 550px;      /* 2x LC width + RC width */</div><div class="line">        &#125;</div><div class="line">        #container&#123;</div><div class="line">            padding-left: 200px;</div><div class="line">            padding-right: 200px;</div><div class="line">            background-color: red;</div><div class="line">        &#125;</div><div class="line">        .column&#123;</div><div class="line">            float: left;</div><div class="line">            height: 200px;</div><div class="line">        &#125;</div><div class="line">        #center&#123;</div><div class="line">            width: 100%;</div><div class="line">            background-color: aquamarine;</div><div class="line">        &#125;</div><div class="line">        #left,#right&#123;</div><div class="line">            position: relative;</div><div class="line">            width: 200px;</div><div class="line">        &#125;</div><div class="line">        #left&#123;</div><div class="line">            margin-left: -100%;</div><div class="line">            right: 200px;</div><div class="line">            background-color: blue;</div><div class="line">        &#125;</div><div class="line">        #right&#123;</div><div class="line">            margin-right: -200px;</div><div class="line">            background-color: #00B7FF;</div><div class="line">        &#125;</div><div class="line">        #footer &#123;</div><div class="line">            clear: both;//清除浮动</div><div class="line">        &#125;</div><div class="line">        #header,</div><div class="line">        #footer &#123;</div><div class="line">            background-color: #c9c9c9;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        /*** IE6 Fix ***/</div><div class="line">        * html #left &#123;</div><div class="line">            left: 150px;/* RC width */</div><div class="line">        &#125;</div></pre></td></tr></table></figure></p>
<p>效果图：<br><img src="http://static.zybuluo.com/Dreamingboy/4wczr5re003ms5k4dhowhp5q/image.png" alt="image.png-10.7kB"></p>
<p>此时footer是在最底下的。<br>然后去掉这段代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#footer &#123;</div><div class="line">            clear: both;//清除浮动</div><div class="line">        &#125;</div></pre></td></tr></table></figure></p>
<p>再看效果如下：<br><img src="http://static.zybuluo.com/Dreamingboy/c3ysi6g6cmng44o3xw9yg35f/image.png" alt="image.png-11.2kB"></p>
<p>很明显，footer跑到header下面了，很好说明了使用float后元素被抽离的本质。</p>
<p>那么，如何清除浮动呢？具体有以下几种方式:</p>
<ul>
<li>父级元素设置高度<br>以上面的圣杯布局为例，给container设置高度，然后就可以看见footer跑到下面来了，<strong>原理就是因为元素浮动后脱离文档流，在没有给父盒子设置高度的情况下，父盒子里面没有包含东西，所以默认的高度是0，设置之后就相当于给父盒子填充了内容，不过缺点是高度限制住了</strong></li>
<li><p>使用<code>clear:both</code>，在浮动元素后面添加一个占位元素，然后使用clear属性。以上面的为例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//html</div><div class="line">&lt;div id=&quot;container&quot;&gt;</div><div class="line">    &lt;div id=&quot;center&quot; class=&quot;column&quot;&gt;#center&lt;/div&gt;</div><div class="line">    &lt;div id=&quot;left&quot; class=&quot;column&quot;&gt;#left&lt;/div&gt;</div><div class="line">    &lt;div id=&quot;right&quot; class=&quot;column&quot;&gt;#right&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;div id=&apos;clear&apos;&gt;&lt;/div&gt;//占位元素</div><div class="line"></div><div class="line">&lt;div id=&quot;footer&quot;&gt;#footer&lt;/div&gt;</div><div class="line"></div><div class="line">//css</div><div class="line">#clear&#123;</div><div class="line">            height:0;</div><div class="line">            clear: both;</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>使用伪类，原理也是使用占位元素，还是以圣杯布局为例，在父元素container使用伪类</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#container:after&#123;</div><div class="line">           content: &apos;&apos;;</div><div class="line">           height:0;</div><div class="line">           clear: both;</div><div class="line">       &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>###<strong>2.5圣杯布局</strong><br>圣杯布局是经典的三栏布局，是前端入门必须掌握的一个布局方式，但是，网上有很多博客都有讲到如何实现圣杯布局，但是在原理上面却没有深究，其中两个关键点是左边的盒子为什么要加上<code>margin-left: -100%;</code>，这个属性而右边的盒子为什么要加上<code>margin-right: -200px;（假设盒子是200px宽）</code>这个属性。具体的如何实现圣杯布局的代码和过程可以参考这篇文章，作者讲得很详细：<a href="https://segmentfault.com/a/1190000004524159" target="_blank" rel="external">关于圣杯布局</a></p>
<p>下面我就来讲讲我对其中原理的理解，具体的圣杯布局的代码可以参考上面或者是推荐的文章。</p>
<p>因为center、left和right三者都用了<code>float:left</code>，所以，如果在container的width足够大的情况下，三者是如下图排列的：<br><img src="http://static.zybuluo.com/Dreamingboy/iio7j4ieui2kbegtk3er18ut/image.png" alt="image.png-12.2kB"></p>
<p>所以，如果此时想让left跑到center的左边，就得用<code>margin-left:100%</code>，<code>margin-left:100%</code>百分比是相对于父元素，之后三者的排列关系如下：</p>
<p><img src="http://static.zybuluo.com/Dreamingboy/9qw37at8ipend1tswm1krbhn/image.png" alt="image.png-11.1kB"></p>
<p>此时left是覆盖在center上面的，然后再使用<code>position:relative</code>进行位置的调整，然后对于右边的盒子呢，不要忘记上面是我们假设父盒子width足够大的情况下，但是实际情况是父盒子设置了padding，所以实际情况下三者的位置是如下面的：<br><img src="http://static.zybuluo.com/Dreamingboy/04w8qua8cu6bmaqahoqrb3ga/image.png" alt="image.png-14.2kB"></p>
<p>因为宽度不够，原本的left和right都被挤到下面来了，但是left在设置了<code>margin-left</code>转移到上面去了，right就跑到最左边来了，结合上一个图，可以知道原本上图right所在的位置是实际情况中的container的padding，那么如果想让right盒子跑到右边，那么就设置<code>margin-right</code>等于他自身就可以了。</p>
<h3 id="2-6-SEO前端实现"><a href="#2-6-SEO前端实现" class="headerlink" title="2.6 SEO前端实现"></a><strong>2.6 SEO前端实现</strong></h3><p>SEO优化的技巧：<br>1、使用好meta标签</p>
<ul>
<li>meta的keywords，说明网站的关键词。具体代码如下：<code>&lt;meta name=&quot;Keywords&quot;content=&quot;信息参数&quot;/&gt;</code></li>
<li>meta的description，说明网站的主要内容和概况，代码：<code>&lt;meta name=&quot;Description&quot;content=&quot;信息参数&quot;/&gt;</code></li>
<li>meta的robots，告诉搜素引擎抓取哪些页面，代码：<code>&lt;meta name=&quot;Robots&quot; content=&quot;all&quot;/&gt;</code>all代表文件可以被检索，同时页面上的链接可以被查询<br>具体的Robots的参数如下：</li>
</ul>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>all</td>
<td>文件可以被检索，且页面上的链接可以被查询</td>
</tr>
<tr>
<td>none</td>
<td>文件不被检索，页面上的链接不可以查询</td>
</tr>
<tr>
<td>index</td>
<td>文件被检索</td>
</tr>
<tr>
<td>follow</td>
<td>页面上的链接可以被查询</td>
</tr>
<tr>
<td>noindex</td>
<td>问价将不被检索，但页面上的链接可以被查询</td>
</tr>
<tr>
<td>nofollow</td>
<td>问价将被检索，页面上的链接不可以被检索</td>
</tr>
</tbody>
</table>
<p>2、其他的优化SEO的技巧：</p>
<ul>
<li>每个页面只出现一个h1</li>
<li>图片加alt，图片大小做声明，如果图片大小不定义的话会造成页面重新渲染，小图标使用雪碧图，如果能够使用CSS，不使用图片，减少请求次数。</li>
<li>尽量使用iframe框架，重要内容不要放在iframe中</li>
<li>尽量给a标签加上title</li>
</ul>
<p><strong>参考文章</strong><br><a href="https://github.com/markyun/My-blog/tree/master/Front-end-Developer-Questions/Questions-and-Answers" target="_blank" rel="external">前端开发面试题</a><br><a href="https://segmentfault.com/a/1190000010278778" target="_blank" rel="external">SEO优化技巧</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/26/Hello-World/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhengpq">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zhengpq">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/26/Hello-World/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-26T23:55:27+08:00">
                2017-09-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Hello World!</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="/images/avatar.jpg"
              alt="zhengpq" />
          
            <p class="site-author-name" itemprop="name">zhengpq</p>
            <p class="site-description motion-element" itemprop="description"></p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/zhengpq" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-globe"></i></a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://plus.google.com/yourname" target="_blank" title="Google">
                  
                    <i class="fa fa-fw fa-google"></i></a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhengpq</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

</body>
</html>
